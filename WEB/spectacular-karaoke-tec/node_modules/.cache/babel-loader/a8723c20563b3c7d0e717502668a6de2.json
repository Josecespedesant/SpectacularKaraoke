{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yen21\\\\Documents\\\\Programming\\\\SpectacularKaraoke\\\\WEB\\\\spectacular-karaoke-tec\\\\src\\\\components\\\\Lyrics.component.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction lyricsToArray(lyrics) {\n  if (lyrics) {\n    const lines = lyrics.split('\\n');\n    const words = lines.reduce((words, line) => {\n      words = words.concat(line.split(' '));\n      words.push('\\n');\n      return words;\n    }, []);\n    return words;\n  }\n\n  return [];\n}\n\nclass Lyrics extends Component {\n  constructor(props) {\n    super(props);\n\n    this.playLyrics = () => {\n      this.setState({\n        timer: setInterval(this.nextWord, this.props.speed)\n      });\n    };\n\n    this.stopTimer = () => {\n      if (this.timer) {\n        clearInterval(this.timer);\n      }\n    };\n\n    this.stopLyrics = () => {\n      this.stopTimer();\n      this.setState({\n        timer: null\n      });\n    };\n\n    this.nextWord = () => {\n      if (this.state.currentWord <= this.state.lyricsArray.length) {\n        this.setState(prevState => {\n          return {\n            currentWord: prevState.currentWord + 1\n          };\n        });\n      } else if (!this.state.finished) {\n        this.setState({\n          finished: true\n        }, () => {\n          !!this.props.onFinish && this.props.onFinish();\n        });\n      }\n    };\n\n    this.renderHighlightedLyrics = () => {\n      const {\n        lyricsArray,\n        currentWord\n      } = this.state;\n\n      if (currentWord === 0) {\n        return null;\n      }\n\n      console.log();\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"list-group-item d-flex justify-content-center align-items-start fw-bolder\",\n        children: [\" \", lyricsArray.slice(0, currentWord).join(' ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 12\n      }, this);\n    };\n\n    this.renderRemainingLyrics = () => {\n      const {\n        lyricsArray,\n        currentWord\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"list-group-item d-flex justify-content-center align-items-start\",\n        children: lyricsArray.slice(currentWord).join(' ')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 12\n      }, this);\n    };\n\n    this.state = {\n      lyrics: null,\n      lyricsArray: null,\n      currentWord: 0,\n      timer: null,\n      finished: true\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.lyrics !== state.lyrics) {\n      return { ...state,\n        lyrics: props.lyrics,\n        lyricsArray: lyricsToArray(props.lyrics),\n        currentWord: 0,\n        finished: !props.lyrics\n      };\n    }\n\n    return null;\n  }\n\n  componentDidMount() {\n    this.playLyrics();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.currentWord <= nextState.lyricsArray.length;\n  }\n\n  componentWillUnmount() {\n    this.stopTimer();\n  }\n\n  stopPLS() {\n    this.stopTimer();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lyrics\",\n      children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n        children: [this.renderHighlightedLyrics(), \" \", this.renderRemainingLyrics()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.stopPLS,\n        children: \"STOP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLyrics.defaultProps = {\n  speed: 250\n};\nexport default Lyrics;","map":{"version":3,"sources":["C:/Users/yen21/Documents/Programming/SpectacularKaraoke/WEB/spectacular-karaoke-tec/src/components/Lyrics.component.js"],"names":["React","Component","lyricsToArray","lyrics","lines","split","words","reduce","line","concat","push","Lyrics","constructor","props","playLyrics","setState","timer","setInterval","nextWord","speed","stopTimer","clearInterval","stopLyrics","state","currentWord","lyricsArray","length","prevState","finished","onFinish","renderHighlightedLyrics","console","log","slice","join","renderRemainingLyrics","getDerivedStateFromProps","componentDidMount","shouldComponentUpdate","nextProps","nextState","componentWillUnmount","stopPLS","render","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nfunction lyricsToArray(lyrics) {\r\n  if (lyrics) {\r\n    const lines = lyrics.split('\\n');\r\n    const words = lines.reduce((words, line) => {\r\n      words = words.concat(line.split(' '))\r\n      words.push('\\n');\r\n      return words;\r\n    }, []);\r\n    return words;\r\n  }\r\n  return [];\r\n}\r\n\r\nclass Lyrics extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      lyrics: null,\r\n      lyricsArray: null,\r\n      currentWord: 0,\r\n      timer: null,\r\n      finished: true,\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.lyrics !== state.lyrics) {\r\n      return {\r\n        ...state,\r\n        lyrics: props.lyrics,\r\n        lyricsArray: lyricsToArray(props.lyrics),\r\n        currentWord: 0,\r\n        finished: !props.lyrics,\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.playLyrics();\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return nextState.currentWord <= nextState.lyricsArray.length\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.stopTimer();\r\n  }\r\n\r\n  playLyrics = () => {\r\n    this.setState({\r\n      timer: setInterval(this.nextWord, this.props.speed),\r\n    });\r\n  }\r\n\r\n  stopTimer = () => {\r\n    if (this.timer) {\r\n      clearInterval(this.timer);\r\n    }\r\n  }\r\n\r\n  stopPLS (){\r\n    this.stopTimer();\r\n  }\r\n\r\n  stopLyrics = () => {\r\n    this.stopTimer();\r\n    this.setState({\r\n      timer: null,\r\n    });\r\n  }\r\n\r\n  nextWord = () => {\r\n    if (this.state.currentWord <= this.state.lyricsArray.length) {\r\n      this.setState(prevState => {\r\n        return { currentWord: prevState.currentWord + 1 }\r\n      })\r\n    } else if (!this.state.finished) {\r\n      this.setState({ finished: true }, () => {\r\n        !!this.props.onFinish && this.props.onFinish();\r\n      })\r\n    }\r\n  }\r\n\r\n  renderHighlightedLyrics = () => {\r\n    const { lyricsArray, currentWord } = this.state;\r\n    if (currentWord === 0) {\r\n      return null;\r\n    }\r\n    console.log()\r\n    return <span class=\"list-group-item d-flex justify-content-center align-items-start fw-bolder\"> {lyricsArray.slice(0, currentWord).join(' ')}</span>\r\n  }\r\n\r\n  renderRemainingLyrics = () => {\r\n    const { lyricsArray, currentWord } = this.state;\r\n    return <p className=\"list-group-item d-flex justify-content-center align-items-start\">{lyricsArray.slice(currentWord).join(' ')}</p>\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"lyrics\">\r\n        <pre>\r\n          { this.renderHighlightedLyrics() } { this.renderRemainingLyrics() }\r\n        </pre>\r\n        <button onClick={this.stopPLS}>STOP</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLyrics.defaultProps = {\r\n  speed: 250,\r\n}\r\n\r\nexport default Lyrics;\r\n"]},"metadata":{},"sourceType":"module"}